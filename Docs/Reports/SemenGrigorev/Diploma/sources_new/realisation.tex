\section{Реализация}



\subsection{EBNF грамматики}

\subsection{Построение леса вывода}

\subsection{Вычисление атрибутов}

YARD позволяет определять атрибуты для любой части продукции, которая является последовательностью.

Необходимо знать

Дерево вывода выглядит так:

Сыновья одного уровня задают строку, выводимую в грамматике, заданной регулярным выражением в правой части правила. По этому при вычислении атрибутов


TNFA определяется как пятёрка $(Q$, $\Sigma$, $L$, $T$, $q_0$, $F)$, состаящая из:
\begin{itmize}
	\item конечного множества состояний $Q$ 
	\item конечного множества входных символов $\Sigma$ 
	\item конечного множества меток $L$ 
	\item функции перехода $T:$ $Q \times (Z \cup{ \epsilon })\rightarrow 2^{Q \times L}$
	\item начального состояния $q_0$
	\item конечного множества финальных состояний $F$ 
\end{itmize}

Таким образом переходы автомата снабжаются метками. При изображении автомата в виде графа, переходам соответствуют рёбра. Будем записывать метки через 
знак "/" после символа, принимаемого автоматом при данном переходе. 

Пример THFA:

<картинка>

Здесь a -- принимаемый символ, l -- метка.

Чтобы решить задачу необходимо знать, когда началось и когда закончилось распознование той или иной конструкции регулярного выражения. 
Для этого определим  метки специального типа:
\begin{itemize}
	\item для обозначения началаи конца конструкции
		\begin{itemize}
			\item лист: $EltS, EltE$;
			\item последоватльность: $SeqS, SeqE$;
			\item замыкание: $ClsS, ClsE$;
			\item альтернатива: $Alt1S, Alt1E, Alt2S, Alt2E$ - пары меток для каждой ветви;
		\end{itemize}
			\item \omega -- "пустая" метка;
\end{itemize}

Метка для конкретного ребра будет состоять из типа метки и уникального идентификатора, который совпадает у меток начала и конца одной и той же конструкции.
Таким образом, множество меток $L$ можно определить так:
$$
	L = \left\{t*i|t \in \left\{SeqS, SeqE, EltS, EltE, ClsS, ClsE, Alt1S, Alt1E, Alt2S, Alt2E, \omega \right}, i \in N \right}
$$

Дляпостроения TNFA по регулярному выражению необходимо модернизировать алгоритм Томпсона. Его необходимо дополнить механизмом расстановки меток.

Модернизированный алгоритм будет выглядить следующим образом:



Для дальнейшего использования нам нужен детерминированый автомат. При этом метки должни сохраниться

\subsubsection{Построение трассы}




\subsubsection{Генерация action-кода}



\subsubsection{}

